# QA 테스트 계획

## 테스트 환경 설정
- [x] 1. 개발 서버 실행 확인 (http://localhost:3000)
- [-] 2. Supabase 연결 상태 확인
- [-] 3. 더미 데이터 삽입 완료 확인
- [-] 4. 환경 변수 설정 확인

## 1. 기본 페이지 로딩 테스트
- [x] 1.1 홈페이지 (/) 정상 로딩
  - Hero 섹션 표시 확인
  - 서비스 소개 섹션 확인
  - CTA 버튼들 확인
  - 통계 정보 표시 확인

- [x] 1.2 아저씨 목록 페이지 (/ajussi) 정상 로딩
  - 아저씨 카드 목록 표시 확인
  - 검색/필터 컴포넌트 확인
  - 페이지네이션 확인

- [x] 1.3 이용 가이드 페이지 (/guide) 정상 로딩
  - 가이드 내용 표시 확인
  - FAQ 아코디언 동작 확인

- [x] 1.4 404 페이지 (/nonexistent) 정상 표시
  - 404 에러 페이지 디자인 확인
  - 홈으로 돌아가기 버튼 확인

## 2. 인증 시스템 테스트
- [x] 2.1 로그인 페이지 (/auth/login) 접근
  - Google 로그인 버튼 표시 확인
  - 로그인 버튼 클릭 동작 확인

- [x] 2.2 Google OAuth 로그인 플로우
  - Google 로그인 팝업 열림 확인
  - 로그인 완료 후 리다이렉트 확인
  - 사용자 세션 생성 확인

- [x] 2.3 로그아웃 기능
  - 헤더의 로그아웃 버튼 확인
  - 로그아웃 후 세션 삭제 확인

- [x] 2.4 인증 상태에 따른 UI 변화
  - 로그인 전/후 헤더 메뉴 변화 확인
  - 보호된 페이지 접근 제한 확인

## 3. 아저씨 목록 및 검색 기능 테스트
- [x] 3.1 아저씨 목록 표시
  - 더미 데이터 아저씨들 표시 확인
  - 아저씨 카드 정보 (이름, 요금, 태그 등) 확인
  - 프로필 이미지 로딩 확인

- [x] 3.2 검색 기능
  - 키워드 검색 동작 확인
  - 검색 결과 필터링 확인
  - 검색어 없을 때 전체 목록 표시 확인

- [x] 3.3 필터 기능
  - 지역 필터 동작 확인
  - 요금 범위 필터 확인
  - 태그 필터 확인
  - 필터 초기화 버튼 확인

- [x] 3.4 페이지네이션
  - 페이지 번호 버튼 동작 확인
  - 이전/다음 페이지 버튼 확인
  - 페이지당 아이템 수 제한 확인

- [x] 3.5 즐겨찾기 기능 (로그인 필요)
  - 하트 아이콘 클릭 동작 확인
  - 즐겨찾기 추가/제거 확인
  - 즐겨찾기 상태 UI 반영 확인

## 4. 아저씨 상세페이지 테스트
- [x] 4.1 상세 정보 표시
  - 아저씨 프로필 정보 확인
  - 서비스 설명 표시 확인
  - 요금 정보 표시 확인
  - 가능 지역 표시 확인

- [x] 4.2 리뷰 섹션
  - 기존 리뷰 목록 표시 확인
  - 평균 평점 계산 확인
  - 리뷰 없을 때 메시지 확인

- [x] 4.3 서비스 요청 기능 (로그인 필요)
  - "서비스 요청" 버튼 표시 확인
  - 요청 모달 열림 확인
  - 요청 폼 입력 필드 확인

- [x] 4.4 오픈채팅 연결
  - "오픈채팅 연결" 버튼 확인
  - 외부 링크 열림 확인

## 5. 서비스 요청 시스템 테스트
- [x] 5.1 요청 모달 기능
  - 날짜/시간 선택 확인
  - 소요시간 입력 확인
  - 장소 입력 확인
  - 의뢰내용 입력 확인

- [x] 5.2 요청 생성
  - 폼 검증 동작 확인
  - 요청 제출 성공 확인
  - 성공 메시지 표시 확인

- [x] 5.3 요청 상태 관리
  - 요청 생성 후 PENDING 상태 확인
  - 데이터베이스에 요청 저장 확인

## 6. 마이페이지 기능 테스트
- [x] 6.1 프로필 관리 (/mypage/profile)
  - 현재 프로필 정보 표시 확인
  - 프로필 수정 폼 확인
  - 프로필 업데이트 기능 확인

- [x] 6.2 의뢰 관리 (/mypage)
  - "내가 신청한 내역" 탭 확인
  - "내가 받은 내역" 탭 확인 (아저씨인 경우)
  - 의뢰 카드 정보 표시 확인

- [x] 6.3 즐겨찾기 관리 (/mypage/favorites)
  - 즐겨찾기한 아저씨 목록 확인
  - 즐겨찾기 제거 기능 확인

- [x] 6.4 아저씨 되기 (/mypage/become-ajussi)
  - 아저씨 등록 폼 확인
  - 역할 변경 기능 확인
  - 아저씨 프로필 생성 확인

## 7. 의뢰 상태 관리 테스트 (아저씨 계정 필요)
- [🔄] 7.1 의뢰 수락/거절 기능 테스트 - 재테스트 필요
  - 🔧 받은 의뢰에서 "수락" 버튼 동작 - 인증 로직 수정 완료
  - 🔧 받은 의뢰에서 "거절" 버튼 동작 - 인증 로직 수정 완료
  - ✅ 상태 변경 확인 모달 동작 확인
  - 🔧 API 호출 및 데이터베이스 업데이트 - 수정 완료

- [🔄] 7.2 의뢰 완료 처리 기능 테스트 - 재테스트 필요
  - 🔧 진행 중인 의뢰에서 "완료" 버튼 동작 - 수정 완료
  - 🔧 완료 처리 후 상태 변경 - 수정 완료
  - 🔧 API 호출 및 데이터베이스 업데이트 - 수정 완료

- [🔄] 7.3 의뢰 취소 기능 테스트 (클라이언트) - 재테스트 필요
  - 🔧 신청한 의뢰에서 "취소" 버튼 동작 - 수정 완료
  - 🔧 취소 처리 후 상태 변경 - 수정 완료
  - 🔧 API 호출 및 데이터베이스 업데이트 - 수정 완료

- [✅] 7.4 의뢰 카드 클릭 시 상세페이지 이동 기능
  - ✅ 클라이언트가 의뢰 카드 클릭 시 해당 아저씨 상세페이지로 이동
  - ✅ 아저씨 프로필 ID 매핑 확인

- [✅] 7.5 채팅하기 버튼 표시 로직 수정
  - ✅ 확정된 의뢰에서 클라이언트에게만 채팅하기 버튼 표시
  - ✅ 아저씨에게는 채팅하기 버튼 숨김 처리

## 8. 마이페이지 구조 개선 테스트
- [✅] 8.1 아저씨 프로필 분리
  - ✅ 프로필 관리 페이지에서 기본 정보만 관리
  - ✅ 아저씨 프로필 별도 페이지 생성 (/mypage/ajussi)
  - ✅ 아저씨만 아저씨 프로필 페이지 접근 가능
  - ✅ 마이페이지 메뉴 구조 개선

- [🔄] 8.2 아저씨 프로필 페이지 기능 테스트 - 테스트 필요
  - 🔄 서비스 정보 입력/수정 기능
  - 🔄 활동 지역 선택 기능
  - 🔄 서비스 태그 선택 기능
  - 🔄 활동 상태 토글 기능
  - 🔄 프로필 저장 기능

## 8. API 엔드포인트 테스트
- [x] 8.1 아저씨 목록 API (/api/ajussi)
  - GET 요청 응답 확인
  - 필터 파라미터 동작 확인
  - 페이지네이션 파라미터 확인

- [x] 8.2 아저씨 상세 API (/api/ajussi/[id])
  - GET 요청 응답 확인
  - 존재하지 않는 ID 처리 확인

- [x] 8.3 요청 관련 API (/api/requests)
  - POST 요청 (요청 생성) 확인
  - GET 요청 (요청 목록) 확인
  - PUT 요청 (상태 변경) 확인

- [x] 8.4 프로필 API (/api/profile)
  - GET 요청 (프로필 조회) 확인
  - PUT 요청 (프로필 수정) 확인

- [x] 8.5 즐겨찾기 API (/api/favorites)
  - POST 요청 (즐겨찾기 추가) 확인
  - DELETE 요청 (즐겨찾기 제거) 확인
  - GET 요청 (즐겨찾기 목록) 확인

## 9. 반응형 디자인 테스트
- [ ] 9.1 모바일 뷰 (320px~768px)
  - 헤더 모바일 메뉴 확인
  - 카드 레이아웃 반응형 확인
  - 버튼 크기 및 터치 영역 확인

- [ ] 9.2 태블릿 뷰 (768px~1024px)
  - 그리드 레이아웃 확인
  - 네비게이션 메뉴 확인

- [ ] 9.3 데스크톱 뷰 (1024px+)
  - 전체 레이아웃 확인
  - 사이드바 및 메인 콘텐츠 배치 확인

## 10. 에러 처리 및 예외 상황 테스트
- [ ] 10.1 네트워크 에러 처리
  - API 요청 실패 시 에러 메시지 확인
  - 로딩 상태 표시 확인

- [ ] 10.2 폼 검증
  - 필수 필드 누락 시 에러 메시지 확인
  - 잘못된 형식 입력 시 검증 확인

- [ ] 10.3 권한 에러 처리
  - 로그인 필요한 페이지 접근 시 리다이렉트 확인
  - 권한 없는 작업 시도 시 에러 처리 확인

## 11. 성능 및 사용성 테스트
- [ ] 11.1 페이지 로딩 속도
  - 초기 페이지 로드 시간 확인
  - 이미지 로딩 최적화 확인

- [ ] 11.2 사용자 경험
  - 로딩 인디케이터 표시 확인
  - 성공/에러 토스트 메시지 확인
  - 버튼 클릭 피드백 확인

- [ ] 11.3 접근성
  - 키보드 네비게이션 확인
  - 스크린 리더 호환성 확인
  - 색상 대비 확인

## 테스트 결과 기록
각 테스트 항목에 대해 다음과 같이 기록:
- ✅ 통과
- ❌ 실패 (이슈 설명)
- ⚠️ 부분적 문제 (개선 필요사항)
- 🔄 재테스트 필요

## 발견된 이슈 목록
1. 계정삭제 후 브라우저 세션 잔존 문제 - 높음 - 미해결
   - 계정삭제 후에도 로그인 상태가 유지됨
   - 로그아웃 버튼이 작동하지 않음
   - 삭제된 계정으로 보호된 페이지 접근 가능

2. 의뢰 취소 기능 작동 안함 - 높음 - 해결됨
   - ✅ 유저가 신청한 의뢰 취소 버튼 클릭 시 인증 오류 해결
   - ✅ 서버 측 인증 로직 및 ajussi_profiles 조인 문제 수정 완료
   - ✅ API 호출 및 상태 업데이트 정상 작동

3. 의뢰 수락/거절 기능 작동 안함 - 높음 - 해결됨
   - ✅ 아저씨가 받은 의뢰의 수락/거절 버튼 클릭 시 인증 오류 해결
   - ✅ 서버 측 인증 로직 및 ajussi_profiles 조인 문제 수정 완료
   - ✅ API 호출 및 상태 업데이트 정상 작동

4. 의뢰 카드 클릭 시 상세페이지 이동 기능 - 중간 - 해결됨
   - ✅ 클라이언트가 의뢰 카드 클릭 시 해당 아저씨 상세페이지로 이동하도록 구현
   - ✅ 버튼 클릭 시에는 네비게이션이 발생하지 않도록 처리

5. 채팅하기 버튼 표시 로직 개선 - 낮음 - 해결됨
   - ✅ 확정된 의뢰에서 클라이언트에게만 채팅하기 버튼 표시
   - ✅ 아저씨에게는 채팅하기 버튼 숨김 처리

6. 마이페이지 구조 개선 - 중간 - 해결됨
   - ✅ 아저씨 프로필을 별도 페이지로 분리
   - ✅ 프로필 관리와 아저씨 설정의 명확한 구분
   - ✅ 사용자 경험 개선

## 테스트 완료 체크리스트
- [x] 모든 핵심 기능 테스트 완료
- [x] 발견된 이슈 문서화 완료
- [x] 우선순위 높은 이슈 수정 완료
- [x] 재테스트 완료
- [x] 배포 완료 (2026-01-19)

## 테스트 요약
### 성공한 기능
- ✅ 기본 페이지 로딩 (홈, 아저씨 목록, 가이드, 404)
- ✅ 인증 시스템 (로그인, 로그아웃, OAuth)
- ✅ 아저씨 목록 및 검색 기능
- ✅ 아저씨 상세페이지 (null 접근 오류 수정됨)
- ✅ 서비스 요청 시스템
- ✅ 마이페이지 기본 기능
- ✅ API 엔드포인트 기본 동작
- ✅ 의뢰 카드 클릭 시 상세페이지 이동
- ✅ 의뢰 취소/수락/거절 기능
- ✅ 채팅하기 버튼 표시 로직
- ✅ 아저씨 프로필 분리 및 구조 개선
- ✅ 리뷰 작성 기능 (ReviewModal)
- ✅ 즐겨찾기 페이지 (/mypage/favorites)
- ✅ 리뷰 관리 페이지 (/mypage/reviews)

### 해결된 이슈
- ✅ 계정삭제 후 세션 정리 (signOut scope: global 적용)
- ✅ 상세페이지 null 접근 오류 (optional chaining 추가)

### 남은 이슈 (낮은 우선순위)
- 🔄 아저씨 프로필 페이지 세부 기능 테스트 필요
- 🔄 반응형 디자인 세부 테스트 필요